<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1.0" />


	<h:outputStylesheet name="assets/js/plugins/slick-carousel/slick.css" />
	<h:outputStylesheet
		name="assets/js/plugins/slick-carousel/slick-theme.css" />



</h:head>
<c:choose>
	<c:when test="#{userRole eq 'admin'}">

		<h:body>
			<div id="page-container"
				class="sidebar-o sidebar-mini enable-page-overlay side-scroll page-header-fixed remember-theme page-header-modern main-content-narrow">

				<!-- Side Overlay-->
				<ui:include src="/navigation/sidebar_admin.xhtml" />
				<ui:include src="/navigation/header.xhtml" />


				<!-- Main Container -->
				<main id="main-container">

					<!-- Page Content -->
					<div class="content">

						<h2 class="content-heading">Statistiques</h2>
						<div class="row items-push">

							<div class="col-md-4">
								<!-- Tiles Slider 3 -->
								<div class="block block-rounded">
									<div class="block-header block-header-default">
										<h3 class="block-title">Stagiaires</h3>
									</div>
									<div class="js-slider slick-nav-black slick-nav-hover"
										data-dots="true" data-autoplay="true" data-arrows="true">
										<div class="block text-center bg-body-extra-light mb-0">
											<div
												class="block-content block-content-full bg-success-light">
												<i class="fa fa-clock fa-5x text-success"></i>
											</div>
											<div class="block-content block-content-full bg-success">
												<div class="fs-4 fw-semibold text-white">
													<h:outputText
														value="#{StagiaireManagedBean.enCoursStagiaires.size()}" />

												</div>
												<div class="fs-sm fw-medium text-white-75">EN COURS</div>
											</div>
										</div>
										<div class="block text-center bg-body-extra-light mb-0">
											<div
												class="block-content block-content-full bg-primary-lighter">
												<i class="fa fa-user-plus fa-5x text-primary"></i>
											</div>
											<div class="block-content block-content-full bg-primary">
												<div class="fs-4 fw-semibold text-white">

													<h:outputText
														value="#{StagiaireManagedBean.nouveauStagiaires.size()}" />

												</div>
												<div class="fs-sm fw-medium text-white-75">NOUVEAU</div>
											</div>
										</div>
										<div class="block text-center bg-body-extra-light mb-0">
											<div
												class="block-content block-content-full bg-warning-light">
												<i class="fa fa-box-archive fa-5x text-warning"></i>
											</div>
											<div class="block-content block-content-full bg-warning">



												<div class="fs-4 fw-semibold text-white">
													<h:outputText
														value="#{StagiaireManagedBean.archiveStagiaires.size()}" />
												</div>
												<div class="fs-sm fw-medium text-white-75">EN ARCHIVE</div>
											</div>
										</div>
									</div>
								</div>

								<!-- END Tiles Slider 3 -->
							</div>

							<div class="col-md-4">
								<!-- Tiles Slider 3 -->
								<div class="block block-rounded">
									<div class="block-header block-header-default">
										<h3 class="block-title">Stages</h3>
									</div>
									<div class="js-slider slick-nav-black slick-nav-hover"
										data-dots="true" data-autoplay="true" data-arrows="true">
										<div class="block text-center bg-body-extra-light mb-0">
											<div
												class="block-content block-content-full bg-success-light">
												<i class="fa fa-circle-check fa-5x text-success"></i>
											</div>
											<div class="block-content block-content-full bg-success">
												<div class="fs-4 fw-semibold text-white">
													<h:outputText
														value="#{StageManagedBean.affecteStages.size()}" />

												</div>
												<div class="fs-sm fw-medium text-white-75">AFFECTES</div>
											</div>
										</div>
										<div class="block text-center bg-body-extra-light mb-0">
											<div
												class="block-content block-content-full bg-warning-light">
												<i class="far fa-circle-xmark fa-5x text-warning"></i>
											</div>
											<div class="block-content block-content-full bg-warning">
												<div class="fs-4 fw-semibold text-white">

													<h:outputText
														value="#{StageManagedBean.nonAffecteStages.size()}" />

												</div>
												<div class="fs-sm fw-medium text-white-75">NON
													AFFECTES</div>
											</div>
										</div>

									</div>
								</div>

								<!-- END Tiles Slider 3 -->
							</div>

							<div class="col-md-4">
								<!-- Tiles Slider 3 -->
								<div class="block block-rounded">
									<div class="block-header block-header-default">
										<h3 class="block-title">Encadrants</h3>
									</div>
									<div class="js-slider slick-nav-black slick-nav-hover"
										data-dots="true" data-autoplay="true" data-arrows="true">
										<div class="block text-center bg-body-extra-light mb-0">
											<div
												class="block-content block-content-full bg-success-light">
												<i class="fa fa-circle-check fa-5x text-success"></i>
											</div>
											<div class="block-content block-content-full bg-success">
												<div class="fs-4 fw-semibold text-white">
													<h:outputText
														value="#{EncadrantManagedBean.affecteEncadrants.size()}" />

												</div>
												<div class="fs-sm fw-medium text-white-75">AFFECTES</div>
											</div>
										</div>
										<div class="block text-center bg-body-extra-light mb-0">
											<div
												class="block-content block-content-full bg-warning-light">
												<i class="far fa-circle-xmark fa-5x text-warning"></i>
											</div>
											<div class="block-content block-content-full bg-warning">
												<div class="fs-4 fw-semibold text-white">

													<h:outputText
														value="#{EncadrantManagedBean.nonAffecteEncadrants.size()}" />

												</div>
												<div class="fs-sm fw-medium text-white-75">NON
													AFFECTES</div>
											</div>
										</div>

									</div>
								</div>

								<!-- END Tiles Slider 3 -->
							</div>

						</div>
						<div class="row items-push">
							<!-- Donut Chart -->
							<div class="col">
								<div class="block block-rounded">
									<div class="block-header block-header-default">
										<h3 class="block-title">Stagiaires</h3>
										<div class="block-options">
											<button type="button" class="btn-block-option"
												data-toggle="block-option" data-action="state_toggle"
												data-action-mode="demo">
												<i class="si si-refresh"></i>
											</button>
										</div>
									</div>
									<div class="block-content block-content-full text-center">
										<!-- Donut Chart Container -->
										<canvas id="chart-stagiaires"></canvas>
									</div>
								</div>
								<!-- END Donut Chart -->
							</div>
							<!-- Donut Chart -->
							<div class="col">
								<div class="block block-rounded">
									<div class="block-header block-header-default">
										<h3 class="block-title">Stages</h3>
										<div class="block-options">
											<button type="button" class="btn-block-option"
												data-toggle="block-option" data-action="state_toggle"
												data-action-mode="demo">
												<i class="si si-refresh"></i>
											</button>
										</div>
									</div>
									<div class="block-content block-content-full text-center">
										<!-- Donut Chart Container -->
										<canvas id="chart-stages"></canvas>
									</div>
								</div>
								<!-- END Donut Chart -->
							</div>
							<!-- Donut Chart -->
							<div class="col">
								<div class="block block-rounded">
									<div class="block-header block-header-default">
										<h3 class="block-title">Encadrants</h3>
										<div class="block-options">
											<button type="button" class="btn-block-option"
												data-toggle="block-option" data-action="state_toggle"
												data-action-mode="demo">
												<i class="si si-refresh"></i>
											</button>
										</div>
									</div>
									<div class="block-content block-content-full text-center">
										<!-- Donut Chart Container -->
										<canvas id="chart-encadrants"></canvas>
									</div>
								</div>
								<!-- END Donut Chart -->
							</div>
						</div>
					</div>
					<!-- END Page Content -->
				</main>
				<!-- END Main Container -->
			<ui:include src="/navigation/footer.xhtml" />

			</div>
			<!-- END Page Container -->


			<h:outputScript name="assets/js/plugins/slick-carousel/slick.min.js" />


			<h:outputScript
				name="assets/js/plugins/easy-pie-chart/jquery.easypiechart.min.js" />
			<h:outputScript
				name="assets/js/plugins/jquery-sparkline/jquery.sparkline.min.js" />
			<h:outputScript name="assets/js/plugins/chart.js/chart.umd.js" />


			<h:outputScript name="assets/js/pages/be_comp_charts.min.js" />



			<script>
// Get the canvas element
var ctxStagiaires = document.getElementById('chart-stagiaires').getContext('2d');
var ctxStages = document.getElementById('chart-stages').getContext('2d');
var ctxEncadrants = document.getElementById('chart-encadrants').getContext('2d');

// Assume you have a managed bean named 'MyManagedBean'
var countsStagiaires = [
  #{StagiaireManagedBean.enCoursStagiaires.size()},
  #{StagiaireManagedBean.nouveauStagiaires.size()},
  #{StagiaireManagedBean.archiveStagiaires.size()}
];

var countsStages = [
	  #{StageManagedBean.affecteStages.size()},
	  #{StageManagedBean.nonAffecteStages.size()}
	];
	
var countsEncadrants = [
	  #{EncadrantManagedBean.affecteEncadrants.size()},
	  #{EncadrantManagedBean.nonAffecteEncadrants.size()}
	];

// Create the donut chart
var donutChartStagiaires = new Chart(ctxStagiaires, {
  type: 'pie',
  data: {
    labels: ['EN COURS', 'NOUVEAU', 'EN ARCHIVE'],
    datasets: [{
      data: countsStagiaires,
      backgroundColor: ['#65a30d', '#2facb2', '#d97706'],
    }]
  },
  options: {
      maintainAspectRatio: false,
      responsive: true,
      // Additional options and configurations (if needed)
    }
});



  var donutChartStages = new Chart(ctxStages, {
    type: 'pie',
    data: {
      labels: ['AFFECTE', 'NON AFFECTE'],
      datasets: [{
        data: countsStages,
        backgroundColor: ['#65a30d', '#d97706'],
      }]
    },
    options: {
      maintainAspectRatio: false,
      responsive: true,
      // Additional options and configurations (if needed)
    }
  });


  var donutChartEncadrants = new Chart(ctxEncadrants, {
    type: 'pie',
    data: {
      labels: ['AFFECTE', 'NON AFFECTE'],
      datasets: [{
        data: countsEncadrants,
        backgroundColor: ['#65a30d', '#d97706'],
      }]
    },
    options: {
      maintainAspectRatio: false,
      responsive: true,
      // Additional options and configurations (if needed)
    }
  });
</script>


			<script>
		Codebase.helpersOnLoad([ 'jq-slick', 'jq-easy-pie-chart',
				'jq-sparkline' ]);
	</script>



</h:body>
	</c:when>
	<c:otherwise>
		<ui:include src="/errors/error403.xhtml" />
	</c:otherwise>
</c:choose>
</html>